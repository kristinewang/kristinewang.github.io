<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Hi man"><title>设计模式笔记-观察者模式 | kristine</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/donate.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">设计模式笔记-观察者模式</h1><a id="logo" href="/.">kristine</a><p class="description">记录的地方</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa null"> 首页</i></a><a href="/archives/"><i class="fa null"> 归档</i></a><a href="/resume/"><i class="fa null"> 简历</i></a><a href="/about/"><i class="fa null"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">设计模式笔记-观察者模式</h1><div class="post-meta">Feb 10, 2017<span> | </span><span class="category"><a href="/categories/技术/">技术</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/02/10/设计模式笔记-观察者模式/" href="/2017/02/10/设计模式笔记-观察者模式/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>观察者模式也叫发布/订阅模式，它定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。这个主题对象在状态发生变化时，会通知所有观察者对象，并且自动更新。</p>
<h3 id="模式中的角色"><a href="#模式中的角色" class="headerlink" title="模式中的角色"></a>模式中的角色</h3><ul>
<li><p>抽象主题（subject）<br>这是主题接口，对象使用此接口注册为观察者，或者把自己从观察者中删除，每个主题可以有多个观察者。</p>
</li>
<li><p>具体主题（ConcreteSubject）<br>将有关状态存入具体观察者对象；在具体主题内部状态改变时，给所有登记过的观察者发出通知。</p>
</li>
<li><p>抽象观察者（Observer）<br>定义了一个更新接口，在得到主题更改通知时跟新自己。</p>
</li>
<li><p>具体观察者（ConcreteObserver）<br>实现抽象观察者中的更新接口，在得到主题更新通知时更新自己。</p>
</li>
<li><p>类图<br><img src="https://github.com/kristinewang/kristinewang.github.io/blob/master/observer.png?raw=true" alt="类图"></p>
</li>
</ul>
<h3 id="HeadFirst中气象站的实现"><a href="#HeadFirst中气象站的实现" class="headerlink" title="HeadFirst中气象站的实现"></a>HeadFirst中气象站的实现</h3><ul>
<li><p>类图</p>
</li>
<li><p>实现代码</p>
</li>
</ul>
<h5 id="抽象主题Subject"><a href="#抽象主题Subject" class="headerlink" title="抽象主题Subject"></a>抽象主题Subject</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="抽象观察者Obsever"><a href="#抽象观察者Obsever" class="headerlink" title="抽象观察者Obsever"></a>抽象观察者Obsever</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temp, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="具体主题WeatherData"><a href="#具体主题WeatherData" class="headerlink" title="具体主题WeatherData"></a>具体主题WeatherData</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> ArrayList observers;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">float</span> temperature;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">float</span> humidity;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">float</span> pressure;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">WeatherData</span><span class="params">()</span> </span>&#123;</div><div class="line">		observers = <span class="keyword">new</span> ArrayList();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(java.util.Observer o)</span> </span>&#123;</div><div class="line">		observers.add(o);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(java.util.Observer o)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> i = observers.indexOf(o);</div><div class="line">		<span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</div><div class="line">			observers.remove(i);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; observers.size(); i++) &#123;</div><div class="line">			java.util.Observer observer = (Observer)observers.get(i);</div><div class="line">			observer.update(temperature, humidity, pressure);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">measurementsChanged</span><span class="params">()</span> </span>&#123;</div><div class="line">		notifyObservers();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMeasurements</span><span class="params">(<span class="keyword">float</span> temperature, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.temperature = temperature;</div><div class="line">		<span class="keyword">this</span>.humidity = humidity;</div><div class="line">		<span class="keyword">this</span>.pressure = pressure;</div><div class="line">		measurementsChanged();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// other WeatherData methods here</span></div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTemperature</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> temperature;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getHumidity</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> humidity;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPressure</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> pressure;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="本系统的辅助接口DisplayElement"><a href="#本系统的辅助接口DisplayElement" class="headerlink" title="本系统的辅助接口DisplayElement"></a>本系统的辅助接口DisplayElement</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DisplayElement</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="具体观察者"><a href="#具体观察者" class="headerlink" title="具体观察者"></a>具体观察者</h5><h6 id="布告板StatisticsDisplay：显示最小、平均和最大的温度观测值"><a href="#布告板StatisticsDisplay：显示最小、平均和最大的温度观测值" class="headerlink" title="布告板StatisticsDisplay：显示最小、平均和最大的温度观测值"></a>布告板StatisticsDisplay：显示最小、平均和最大的温度观测值</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StatisticsDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> maxTemp = <span class="number">0.0f</span>;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> minTemp = <span class="number">200</span>;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> tempSum= <span class="number">0.0f</span>;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> numReadings;<span class="comment">//记录观测的次数以便计算平均温度值  </span></div><div class="line">    <span class="keyword">private</span> Subject weatherData;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StatisticsDisplay</span><span class="params">(Subject weatherData)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.weatherData = weatherData;  </div><div class="line">        weatherData.registerObserver(<span class="keyword">this</span>);  </div><div class="line">    &#125;  </div><div class="line">    <span class="comment">//这属于“推”数据，本类只使用到了第一个参数  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temp, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;  </div><div class="line">        tempSum += temp;  </div><div class="line">        numReadings++;  </div><div class="line">  </div><div class="line">        <span class="keyword">if</span> (temp &gt; maxTemp) &#123;  </div><div class="line">            maxTemp = temp;  </div><div class="line">        &#125;  </div><div class="line">   </div><div class="line">        <span class="keyword">if</span> (temp &lt; minTemp) &#123;  </div><div class="line">            minTemp = temp;  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        display();  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"Avg/Max/Min temperature = "</span> + (tempSum / numReadings)  </div><div class="line">            + <span class="string">"/"</span> + maxTemp + <span class="string">"/"</span> + minTemp);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="布告板CurrentConditionsDisplay：显示当前的温度、湿度"><a href="#布告板CurrentConditionsDisplay：显示当前的温度、湿度" class="headerlink" title="布告板CurrentConditionsDisplay：显示当前的温度、湿度"></a>布告板CurrentConditionsDisplay：显示当前的温度、湿度</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentConditionsDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> temperature;<span class="comment">//温度  </span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> humidity;<span class="comment">//湿度  </span></div><div class="line">    <span class="keyword">private</span> Subject weatherData;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CurrentConditionsDisplay</span><span class="params">(Subject weatherData)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.weatherData = weatherData;  </div><div class="line">        weatherData.registerObserver(<span class="keyword">this</span>);  </div><div class="line">    &#125;  </div><div class="line">    <span class="comment">//推数据，这里只使用到了前两个参数  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temperature, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.temperature = temperature;  </div><div class="line">        <span class="keyword">this</span>.humidity = humidity;  </div><div class="line">        display();  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"Current conditions: "</span> + temperature   </div><div class="line">            + <span class="string">"F degrees and "</span> + humidity + <span class="string">"% humidity"</span>);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="布告板ForecastDisplay：天气预报"><a href="#布告板ForecastDisplay：天气预报" class="headerlink" title="布告板ForecastDisplay：天气预报"></a>布告板ForecastDisplay：天气预报</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForecastDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> currentPressure = <span class="number">29.92f</span>;    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> lastPressure;  </div><div class="line">    <span class="keyword">private</span> Subject weatherData;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ForecastDisplay</span><span class="params">(Subject weatherData)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.weatherData = weatherData;  </div><div class="line">        weatherData.registerObserver(<span class="keyword">this</span>);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> temp, <span class="keyword">float</span> humidity, <span class="keyword">float</span> pressure)</span> </span>&#123;  </div><div class="line">        lastPressure = currentPressure;  </div><div class="line">        currentPressure = pressure;  </div><div class="line">        display();  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.print(<span class="string">"Forecast: "</span>);  </div><div class="line">        <span class="keyword">if</span> (currentPressure &gt; lastPressure) &#123;  </div><div class="line">            System.out.println(<span class="string">"Improving weather on the way!"</span>);  </div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentPressure == lastPressure) &#123;  </div><div class="line">            System.out.println(<span class="string">"More of the same"</span>);  </div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (currentPressure &lt; lastPressure) &#123;  </div><div class="line">            System.out.println(<span class="string">"Watch out for cooler, rainy weather"</span>);  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="增加新的布告板，增加一个“酷热指数”布告板HeatIndexDisplay"><a href="#增加新的布告板，增加一个“酷热指数”布告板HeatIndexDisplay" class="headerlink" title="增加新的布告板，增加一个“酷热指数”布告板HeatIndexDisplay"></a>增加新的布告板，增加一个“酷热指数”布告板HeatIndexDisplay</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeatIndexDisplay</span> <span class="keyword">implements</span> <span class="title">Observer</span>, <span class="title">DisplayElement</span> </span>&#123;  </div><div class="line">    <span class="keyword">float</span> heatIndex = <span class="number">0.0f</span>;  </div><div class="line">    <span class="keyword">private</span> Subject weatherData;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HeatIndexDisplay</span><span class="params">(Subject weatherData)</span> </span>&#123;  </div><div class="line">        <span class="keyword">this</span>.weatherData = weatherData;  </div><div class="line">        weatherData.registerObserver(<span class="keyword">this</span>);  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> rh, <span class="keyword">float</span> pressure)</span> </span>&#123;  </div><div class="line">        heatIndex = computeHeatIndex(t, rh);  </div><div class="line">        display();  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">float</span> <span class="title">computeHeatIndex</span><span class="params">(<span class="keyword">float</span> t, <span class="keyword">float</span> rh)</span> </span>&#123;  </div><div class="line">        <span class="keyword">float</span> index = (<span class="keyword">float</span>)((<span class="number">16.923</span> + (<span class="number">0.185212</span> * t) + (<span class="number">5.37941</span> * rh) - (<span class="number">0.100254</span> * t * rh)   </div><div class="line">            + (<span class="number">0.00941695</span> * (t * t)) + (<span class="number">0.00728898</span> * (rh * rh))   </div><div class="line">            + (<span class="number">0.000345372</span> * (t * t * rh)) - (<span class="number">0.000814971</span> * (t * rh * rh)) +  </div><div class="line">            (<span class="number">0.0000102102</span> * (t * t * rh * rh)) - (<span class="number">0.000038646</span> * (t * t * t)) + (<span class="number">0.0000291583</span> *   </div><div class="line">            (rh * rh * rh)) + (<span class="number">0.00000142721</span> * (t * t * t * rh)) +   </div><div class="line">            (<span class="number">0.000000197483</span> * (t * rh * rh * rh)) - (<span class="number">0.0000000218429</span> * (t * t * t * rh * rh)) +  </div><div class="line">            <span class="number">0.000000000843296</span> * (t * t * rh * rh * rh)) -  </div><div class="line">            (<span class="number">0.0000000000481975</span> * (t * t * t * rh * rh * rh)));  </div><div class="line">        <span class="keyword">return</span> index;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"Heat index is "</span> + heatIndex);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherStationHeatIndex</span> </span>&#123;  </div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </div><div class="line">        WeatherData weatherData = <span class="keyword">new</span> WeatherData();  </div><div class="line">        CurrentConditionsDisplay currentDisplay = <span class="keyword">new</span> CurrentConditionsDisplay(weatherData);  </div><div class="line">        StatisticsDisplay statisticsDisplay = <span class="keyword">new</span> StatisticsDisplay(weatherData);  </div><div class="line">        ForecastDisplay forecastDisplay = <span class="keyword">new</span> ForecastDisplay(weatherData);  </div><div class="line">        HeatIndexDisplay heatIndexDisplay = <span class="keyword">new</span> HeatIndexDisplay(weatherData);  </div><div class="line">  </div><div class="line">        weatherData.setMeasurements(<span class="number">80</span>, <span class="number">65</span>, <span class="number">30.4f</span>);  </div><div class="line">        weatherData.setMeasurements(<span class="number">82</span>, <span class="number">70</span>, <span class="number">29.2f</span>);  </div><div class="line">        weatherData.setMeasurements(<span class="number">78</span>, <span class="number">90</span>, <span class="number">29.2f</span>);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2017/02/10/设计模式笔记-观察者模式/" data-id="ciz3gulzb0002x0z02mcsj5pl" class="article-share-link">分享到</a><div class="tags"><a href="/tags/设计模式/">设计模式</a></div><div class="post-nav"><a href="/2017/01/11/hello-world/" class="next">我的博客</a></div><div class="donateBox"><div id="DonateText" class="tr3">Donate</div><ul id="donateBox" class="list tr3 pos-f"><li id="AliPay">AliPay</li><li id="WeChat">WeChat</li></ul><div id="QRBox" class="left-100 pos-f"><div id="MainBox"></div></div></div><script type="text/javascript" src="/js/script.js?v=0.0.0" async></script><div id="disqus_thread"><script>var disqus_shortname = 'xiaowang';
var disqus_identifier = '2017/02/10/设计模式笔记-观察者模式/';
var disqus_title = '设计模式笔记-观察者模式';
var disqus_url = 'http://yoursite.com/2017/02/10/设计模式笔记-观察者模式/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//xiaowang.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日志/">日志</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/首文/" style="font-size: 15px;">首文</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/10/设计模式笔记-观察者模式/">设计模式笔记-观察者模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/hello-world/">我的博客</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="null" title="null" target="_blank"></a><ul></ul><a href="null" title="null" target="_blank"></a><ul></ul><a href="null" title="null" target="_blank"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">kristine.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e28519df10cdee75d55b29ab82f20eb3";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>